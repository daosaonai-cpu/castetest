<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C Programming Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 flex items-center justify-center min-h-screen p-4">

    <!-- Password Lock Screen -->
    <div id="lock-screen" class="w-full max-w-sm mx-auto bg-white p-8 rounded-xl shadow-lg text-center">
        <h1 class="text-2xl font-bold text-gray-900 mb-4">Enter Password</h1>
        <p class="text-gray-600 mb-6">Please enter the password to access the quiz.</p>
        <form id="password-form">
            <input type="password" id="password-input" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition" placeholder="Password">
            <p id="error-message" class="text-red-500 h-6 mt-2 text-sm"></p>
            <button type="submit" class="w-full mt-4 bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform transform hover:scale-105">
                Unlock
            </button>
        </form>
    </div>

    <div id="quiz-container" class="w-full max-w-4xl mx-auto bg-white p-6 sm:p-8 rounded-xl shadow-lg hidden">
        <!-- Quiz Header -->
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 border-b pb-4">
            <div>
                <h1 class="text-2xl sm:text-3xl font-bold text-gray-900">BCA 1st Sem: C Programming Quiz</h1>
                <p class="text-gray-600 mt-1">You have 30 minutes to complete the quiz. Each question is worth 2 marks.</p>
            </div>
            <div id="timer" class="mt-4 sm:mt-0 text-2xl font-semibold bg-indigo-100 text-indigo-700 px-4 py-2 rounded-lg">30:00</div>
        </div>

        <!-- Quiz Questions Form -->
        <form id="quiz-form">
            <div id="questions-wrapper" class="space-y-6">
                <!-- Questions will be dynamically inserted here -->
            </div>
            <div class="mt-8 text-center">
                <button type="submit" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform transform hover:scale-105">
                    Submit Quiz
                </button>
            </div>
        </form>
    </div>

    <script>
        const lockScreen = document.getElementById('lock-screen');
        const passwordForm = document.getElementById('password-form');
        const passwordInput = document.getElementById('password-input');
        const errorMessage = document.getElementById('error-message');

        const quizContainer = document.getElementById('quiz-container');
        const quizForm = document.getElementById('quiz-form');
        const questionsWrapper = document.getElementById('questions-wrapper');
        const timerElement = document.getElementById('timer');
        
        // Correct Password
        const CORRECT_PASSWORD = 'BCA12';

        const quizData = [
            {
                question: "C is a high level programming language. (True/False)",
                answer: "True. While C has low-level capabilities, it is formally considered a high-level language because its syntax is human-readable and abstracted from machine-specific instruction sets."
            },
            {
                question: "What is machine language?",
                answer: "Machine language, or machine code, is the lowest-level programming language, consisting of binary digits (0s and 1s). It is the only language that a computer's central processing unit (CPU) can understand and execute directly."
            },
            {
                question: "What is assembly language?",
                answer: "Assembly language is a low-level programming language that uses mnemonics (short, human-readable abbreviations) to represent machine code instructions. It has a one-to-one correspondence with machine language but is easier for humans to read and write."
            },
            {
                question: "What is C?",
                answer: "C is a general-purpose, procedural programming language developed in the early 1970s by Dennis Ritchie. It is known for its efficiency, flexibility, and portability, and it has heavily influenced many other programming languages."
            },
            {
                question: "What is a compiler?",
                answer: "A compiler is a special program that translates source code written in a high-level programming language (like C) into a lower-level language (like machine code) to create an executable program that the computer can run."
            },
            {
                question: "What is an .exe file?",
                answer: "An .exe (executable) file is a file that contains a program in machine code that can be executed or run by a computer's operating system (like Windows). It's the output of a compiler after processing the source code."
            },
            {
                question: "What is preprocessing in C?",
                answer: "Preprocessing is the first step in the C compilation process. The preprocessor obeys commands called directives (like #include and #define) which modify the source code before it is passed to the compiler. It handles tasks like including header files and expanding macros."
            },
            {
                question: "What is a high-level programming language?",
                answer: "A high-level programming language is a language that uses natural language elements, is easier for humans to read and write, and is abstracted from the computer's hardware architecture. Examples include C, Python, and Java."
            },
            {
                question: "What is syntax in the context of programming?",
                answer: "Syntax refers to the set of rules that defines the combinations of symbols that are considered to be correctly structured statements or expressions in a programming language. If the syntax rules are violated, it results in a compilation error."
            },
            {
                question: "Give two common applications of C.",
                answer: "1. Operating Systems: Core parts of major operating systems like Windows, Linux, and macOS are written in C. \n2. Embedded Systems: C is widely used for programming microcontrollers and embedded systems found in cars, electronics, and IoT devices due to its efficiency and direct hardware access."
            }
        ];
        
        const evaluationCriteria = [
            { type: 'exact', keywords: ['true'] },
            { type: 'keywords', keywords: ['binary', 'cpu', 'lowest', 'directly', 'hardware'] },
            { type: 'keywords', keywords: ['low-level', 'mnemonics', 'machine code', 'assembler', 'symbolic'] },
            { type: 'keywords', keywords: ['general-purpose', 'procedural', 'dennis ritchie', 'structured', 'bell labs'] },
            { type: 'keywords', keywords: ['translates', 'converts', 'source code', 'high-level', 'machine code', 'executable'] },
            { type: 'keywords', keywords: ['executable', 'runnable', 'program', 'machine code', 'operating system'] },
            { type: 'keywords', keywords: ['preprocessor', 'directives', '#include', '#define', 'first step', 'macros', 'header'] },
            { type: 'keywords', keywords: ['human-readable', 'english-like', 'abstracted', 'hardware independent'] },
            { type: 'keywords', keywords: ['rules', 'structure', 'grammar', 'format', 'error'] },
            { type: 'keywords', keywords: ['operating system', 'os', 'kernel', 'drivers', 'embedded', 'firmware', 'iot'] },
        ];


        // --- Function to display questions ---
        function displayQuestions() {
            quizData.forEach((data, index) => {
                const questionElement = document.createElement('div');
                questionElement.classList.add('p-4', 'border', 'rounded-lg', 'bg-gray-50');
                questionElement.innerHTML = `
                    <p class="font-semibold text-lg mb-2">${index + 1}. ${data.question}</p>
                    <textarea id="answer-${index}" name="answer-${index}" rows="3" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"></textarea>
                `;
                questionsWrapper.appendChild(questionElement);
            });
        }

        // --- Timer logic ---
        let timeLeft = 30 * 60; // 30 minutes in seconds
        let timerInterval;

        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 60) {
                    timerElement.classList.remove('bg-indigo-100', 'text-indigo-700');
                    timerElement.classList.add('bg-red-100', 'text-red-700');
                }

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz();
                }
            }, 1000);
        }

        // --- Function to handle quiz submission ---
        function submitQuiz() {
            clearInterval(timerInterval);
            let totalScore = 0;
            let resultsHTML = '';
            
            quizData.forEach((data, index) => {
                const userAnswerText = document.getElementById(`answer-${index}`).value;
                const userAnswer = userAnswerText.trim().toLowerCase();
                const criteria = evaluationCriteria[index];
                let questionScore = 0;

                if (criteria.type === 'exact') {
                    if (criteria.keywords.includes(userAnswer)) {
                        questionScore = 2;
                    }
                } else if (criteria.type === 'keywords') {
                    let keywordCount = 0;
                    criteria.keywords.forEach(keyword => {
                        if (userAnswer.includes(keyword)) {
                            keywordCount++;
                        }
                    });
                    if (keywordCount >= 2) {
                        questionScore = 2;
                    } else if (keywordCount === 1) {
                        questionScore = 1;
                    }
                }
                totalScore += questionScore;

                // Build HTML for each result
                resultsHTML += `
                    <div class="p-4 border rounded-lg ${questionScore === 2 ? 'border-green-400 bg-green-50' : questionScore === 1 ? 'border-yellow-400 bg-yellow-50' : 'border-red-400 bg-red-50'}">
                        <p class="font-semibold text-lg mb-2">${index + 1}. ${data.question}</p>
                        <div class="mt-2 p-3 rounded-md bg-white/50">
                            <h4 class="font-bold text-gray-700">Your Answer:</h4>
                            <p class="text-gray-800 whitespace-pre-wrap">${userAnswerText || "No answer provided."}</p>
                        </div>
                         <div class="mt-3 text-right font-bold ${questionScore === 2 ? 'text-green-700' : questionScore === 1 ? 'text-yellow-700' : 'text-red-700'}">
                            Marks: ${questionScore} / 2
                        </div>
                    </div>
                `;
            });

            // Display final results page
            quizContainer.innerHTML = `
                <div class="w-full max-w-4xl mx-auto bg-white rounded-xl">
                    <div class="text-center border-b pb-4 mb-6">
                        <h1 class="text-2xl sm:text-3xl font-bold text-gray-900">Quiz Results</h1>
                    </div>
                    <div class="text-center mb-6 p-4 text-xl font-semibold rounded-lg ${totalScore >= 10 ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                        Your final score is: <strong>${totalScore} / 20</strong>
                    </div>
                    <div class="space-y-6">
                        ${resultsHTML}
                    </div>
                     <div class="mt-8 text-center">
                        <button onclick="window.location.reload()" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform transform hover:scale-105">
                            Take Again
                        </button>
                    </div>
                </div>
            `;
        }
        
        // --- Initialize Quiz ---
        function initializeQuiz() {
            lockScreen.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            displayQuestions();
            startTimer();
        }

        // --- Event Listeners ---
        quizForm.addEventListener('submit', (e) => {
            e.preventDefault();
            submitQuiz();
        });

        passwordForm.addEventListener('submit', (e) => {
            e.preventDefault();
            if (passwordInput.value === CORRECT_PASSWORD) {
                initializeQuiz();
            } else {
                errorMessage.textContent = 'Incorrect password. Please try again.';
                passwordInput.classList.add('border-red-500');
                passwordInput.value = '';
            }
        });

    </script>
</body>
</html>

